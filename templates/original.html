<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Survey</title>
    <style>
      
        .form-container {
            width: 30%;
            background: white;
            padding: 20px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow-y: auto;
            max-height: 90vh;
        }
        fieldset {
            border: 2px solid #007BFF;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        legend {
            font-weight: bold;
            color: #007BFF;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
        }
        .options label {
            display: block;
            margin-left: 10px;
        }
        .submit-btn {
            width: 100%;
            padding: 10px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        .submit-btn:hover {
            background-color: #0056b3;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .container {
            display: flex;
            flex-direction: column;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            width: 80%;
            max-width: 1000px;
            height: 90vh;
            overflow-y: auto;
        }
        .sections {
            display: flex;
            flex-direction: column;
            gap: 40px;
        }
        .row {
            display: flex;
            gap: 30px;
        }
        .form-section {
            flex: 1;
            padding: 20px;
            max-height: 500px;
            overflow-y: auto;
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        }
        .form-section h2 {
            margin-bottom: 15px;
            font-size: 20px;
        }
        .question {
            background: #f9f9f9;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
        }
        .question input {
            margin-right: 5px;
        }
        .media-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }
        video, audio {
            width: 100%;
            max-width: 500px;
        }

  
        .container22 {
            width: 33%; /* 1/3 of the webpage */
            background: white;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            margin-right: 20px;
        }
        .button-group {
            margin-top: 10px;
        }
        textarea {
            width: 100%;
            height: 80px;
            margin-top: 10px;
        }
        button {
            margin-top: 10px;
        }
    </style>
    </style>
</head>
<body>

    <div class="form-section" style="overflow-y: scroll; max-height: 500px;">
        <form action="/process" method="POST">
            <fieldset>
                <legend>Personal Details</legend>
                <label>Enter Your Details:</label>
                <div class="options">
                    <label>Name :</label><input type="text" name="name">
                    <label>Age :</label><input type="number" name="age">
                </div>
            </fieldset>
            <fieldset>
                <legend>Current Mental State</legend>
                <label>How would you describe your current mental state?</label>
                <div class="options">
                    <label><input type="radio" name="mental_state" value="1"> Very calm and relaxed</label>
                    <label><input type="radio" name="mental_state" value="2"> Mostly calm with occasional stress</label>
                    <label><input type="radio" name="mental_state" value="3"> Neutral</label>
                    <label><input type="radio" name="mental_state" value="4"> Often anxious or stressed</label>
                    <label><input type="radio" name="mental_state" value="5"> Extremely anxious or overwhelmed</label>
                </div>
            </fieldset>
            
            <fieldset>
                <legend>Emotional Well-being</legend>
                <label>Do you find it easy to talk about your feelings?</label>
                <div class="options">
                    <label><input type="radio" name="talk_feelings" value="1"> Very easy</label>
                    <label><input type="radio" name="talk_feelings" value="2"> Somewhat easy</label>
                    <label><input type="radio" name="talk_feelings" value="3"> Neutral</label>
                    <label><input type="radio" name="talk_feelings" value="4"> Somewhat difficult</label>
                    <label><input type="radio" name="talk_feelings" value="5"> Very difficult</label>
                </div>
            </fieldset>
            
            <fieldset>
                <legend>Stress & Coping</legend>
                <label>How often do you feel emotionally overwhelmed?</label>
                <div class="options">
                    <label><input type="radio" name="overwhelmed" value="1"> Never</label>
                    <label><input type="radio" name="overwhelmed" value="2"> Rarely</label>
                    <label><input type="radio" name="overwhelmed" value="3"> Sometimes</label>
                    <label><input type="radio" name="overwhelmed" value="4"> Often</label>
                    <label><input type="radio" name="overwhelmed" value="5"> Always</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Habit_changes</legend>
                <label>Have you noticed any changes in your eating or sleeping habits?</label>
                <div class="options">
                    <label><input type="radio" name="Habitchange" value="1"> No changes at all</label>
                    <label><input type="radio" name="Habitchange" value="2"> Minor changes</label>
                    <label><input type="radio" name="Habitchange" value="3"> Noticeble Changes</label>
                    <label><input type="radio" name="Habitchange" value="4"> Significant Changes</label>
                    <label><input type="radio" name="Habitchange" value="5"> Extreme changes affecting daily life</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Happiness_score</legend>
                <label>On a scale of 1‚Äì5, how happy do you feel most of the time?</label>
                <div class="options">
                    <label><input type="radio" name="Happiness" value="5"> 1</label>
                    <label><input type="radio" name="Happiness" value="4"> 2</label>
                    <label><input type="radio" name="Happiness" value="3"> 3</label>
                    <label><input type="radio" name="Happiness" value="2"> 4</label>
                    <label><input type="radio" name="Happiness" value="1"> 5</label>
                </div>
            </fieldset>
            <fieldset>
                <legend>Studies</legend>
                <label>How often do you worry about your studies?</label>
                <div class="options">
                    <label><input type="radio" name="study" value="1"> Never</label>
                    <label><input type="radio" name="study" value="2"> Rarely</label>
                    <label><input type="radio" name="study" value="3"> Sometimes</label>
                    <label><input type="radio" name="study" value="4"> Often</label>
                    <label><input type="radio" name="study" value="5"> Always</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Academic Pressure</legend>
                <label>Do you feel pressured to achieve certain academic goals?</label>
                <div class="options">
                    <label><input type="radio" name="academic_pressure" value="1"> Not at all</label>
                    <label><input type="radio" name="academic_pressure" value="2"> Slightly pressured</label>
                    <label><input type="radio" name="academic_pressure" value="3"> Moderately pressured</label>
                    <label><input type="radio" name="academic_pressure" value="4"> Highly pressured</label>
                    <label><input type="radio" name="academic_pressure" value="5"> Extremely pressured</label>
                </div>
            </fieldset>
            
            <fieldset>
                <legend>Motivation</legend>
                <label>Do you experience difficulty concentrating or staying motivated?</label>
                <div class="options">
                    <label><input type="radio" name="motivation" value="1"> Never</label>
                    <label><input type="radio" name="motivation" value="2"> Rarely</label>
                    <label><input type="radio" name="motivation" value="3"> Sometimes</label>
                    <label><input type="radio" name="motivation" value="4"> Often</label>
                    <label><input type="radio" name="motivation" value="5"> Always</label>
                </div>
            </fieldset>
            <fieldset>
                <legend>Anxious</legend>
                <label>How often do you feel anxious about exams or deadlines?</label>
                <div class="options">
                    <label><input type="radio" name="anxious" value="1"> Never</label>
                    <label><input type="radio" name="anxious" value="2"> Rarely</label>
                    <label><input type="radio" name="anxious" value="3"> Sometimes</label>
                    <label><input type="radio" name="anxious" value="4"> Often</label>
                    <label><input type="radio" name="anxious" value="5"> Always</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Course Stress</legend>
                <label>Have you ever considered giving up on a course because of stress?</label>
                <div class="options">
                    <label><input type="radio" name="course" value="1"> Never</label>
                    <label><input type="radio" name="course" value="2"> Rarely</label>
                    <label><input type="radio" name="course" value="3"> Sometimes</label>
                    <label><input type="radio" name="course" value="4"> Often</label>
                    <label><input type="radio" name="course" value="5"> Always</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>stress_symptoms</legend>
                <label>How often do you feel sad, anxious, or hopeless?</label>
                <div class="options">
                    <label><input type="radio" name="sad" value="1"> Never</label>
                    <label><input type="radio" name="sad" value="2"> Rarely</label>
                    <label><input type="radio" name="sad" value="3"> Sometimes</label>
                    <label><input type="radio" name="sad" value="4"> Often</label>
                    <label><input type="radio" name="sad" value="5"> Always</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Coping_Mechanism</legend>
                <label>How often do you engage in activities that make you happy?</label>
                <div class="options">
                    <label><input type="radio" name="happyacivity" value="1"> Never</label>
                    <label><input type="radio" name="happyacivity" value="2"> Rarely</label>
                    <label><input type="radio" name="happyacivity" value="3"> Sometimes</label>
                    <label><input type="radio" name="happyacivity" value="4"> Often</label>
                    <label><input type="radio" name="happyacivity" value="5"> Always</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Loneliness</legend>
                <label>Do you ever feel lonely, even when surrounded by people?</label>
                <div class="options">
                    <label><input type="radio" name="lonely" value="1"> Never</label>
                    <label><input type="radio" name="lonely" value="2"> Rarely</label>
                    <label><input type="radio" name="lonely" value="3"> Sometimes</label>
                    <label><input type="radio" name="lonely" value="4"> Often</label>
                    <label><input type="radio" name="lonely" value="5"> Always</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Handling conflicts</legend>
                <label>How easy is it for you to handle conflicts or challenges in your personal life?</label>
                <div class="options">
                    <label><input type="radio" name="conflicts" value="1"> Never</label>
                    <label><input type="radio" name="conflicts" value="2"> Rarely</label>
                    <label><input type="radio" name="conflicts" value="3"> Sometimes</label>
                    <label><input type="radio" name="conflicts" value="4"> Often</label>
                    <label><input type="radio" name="conflicts" value="5"> Always</label>
                </div>
            </fieldset>

          

            <fieldset>
                <legend>Social Situations</legend>
                <label>How comfortable are you in social situations?</label>
                <div class="options">
                    <label><input type="radio" name="social" value="1"> very comfortable</label>
                    <label><input type="radio" name="social" value="2"> somewhat comfortable</label>
                    <label><input type="radio" name="social" value="3"> Neutral</label>
                    <label><input type="radio" name="social" value="4"> somewhat uncomfortable</label>
                    <label><input type="radio" name="social" value="5"> very uncomfortable</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Relationships</legend>
                <label>How easy is it for you to maintain relationships with peers and family members?</label>
                <div class="options">
                    <label><input type="radio" name="relationships" value="1"> very easy</label>
                    <label><input type="radio" name="relationships" value="2"> somewhat easy</label>
                    <label><input type="radio" name="relationships" value="3"> Neutral</label>
                    <label><input type="radio" name="relationships" value="4"> somewhat difficult</label>
                    <label><input type="radio" name="relationships" value="5"> very difficult</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Energy Levels Rating</legend>
                <label>How would you rate your energy levels on most days?</label>
                <div class="options">
                    <label><input type="radio" name="energylevels" value="1"> Excellent</label>
                    <label><input type="radio" name="energylevels" value="2">Good</label>
                    <label><input type="radio" name="energylevels" value="3"> Average</label>
                    <label><input type="radio" name="energylevels" value="4"> Low</label>
                    <label><input type="radio" name="energylevels" value="5"> very low</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Sleep_quality</legend>
                <label>How many hours of sleep do you get each night?</label>
                <div class="options">
                    <label><input type="radio" name="sleep" value="1"> Less than 4 hours</label>
                    <label><input type="radio" name="sleep" value="2">4‚Äì5 hours</label>
                    <label><input type="radio" name="sleep" value="3"> 6‚Äì7 hours</label>
                    <label><input type="radio" name="sleep" value="4"> 8 hours</label>
                    <label><input type="radio" name="sleep" value="5"> More than 8 hours</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Coping mechanisms</legend>
                <label>How often do you use healthy coping mechanisms when stressed?</label>
                <div class="options">
                    <label><input type="radio" name="mechanisms" value="1"> Always</label>
                    <label><input type="radio" name="mechanisms" value="2"> Most of the time</label>
                    <label><input type="radio" name="mechanisms" value="3"> Sometimes</label>
                    <label><input type="radio" name="mechanisms" value="4"> Rarely</label>
                    <label><input type="radio" name="mechanisms" value="5"> Never</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Trust_support</legend>
                <label>Do you have someone you trust to talk to when you‚Äôre struggling?</label>
                <div class="options">
                    <label><input type="radio" name="trust" value="1"> Yes, always</label>
                    <label><input type="radio" name="trust" value="2">Most of the time</label>
                    <label><input type="radio" name="trust" value="3"> Sometimes</label>
                    <label><input type="radio" name="trust" value="4"> Rarely</label>
                    <label><input type="radio" name="trust" value="5"> No</label>
                </div>
            </fieldset>

            

            

            <fieldset>
                <legend>Therapy</legend>
                <label>Have you ever sought professional help for your mental health?</label>
                <div class="options">
                    <label><input type="radio" name="professional" value="1"> Yes, currently in therapy</label>
                    <label><input type="radio" name="professional" value="2"> Yes, in the past</label>
                    <label><input type="radio" name="professional" value="3"> No, but I‚Äôve considered it</label>
                    <label><input type="radio" name="professional" value="4"> No, never</label>
                    <label><input type="radio" name="professional" value="5"> No need </label>
                </div>
            </fieldset>


            <fieldset>
                <legend>Future Outlook</legend>
                <label>How do you feel about your future prospects?</label>
                <div class="options">
                    <label><input type="radio" name="future_prospects" value="1"> Very positive</label>
                    <label><input type="radio" name="future_prospects" value="2"> Somewhat positive</label>
                    <label><input type="radio" name="future_prospects" value="3"> Neutral</label>
                    <label><input type="radio" name="future_prospects" value="4"> Somewhat negative</label>
                    <label><input type="radio" name="future_prospects" value="5"> Very negative</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Confidence</legend>
                <label>How confident are you in your ability to handle life‚Äôs challenges?</label>
                <div class="options">
                    <label><input type="radio" name="challenges" value="1"> Very confident</label>
                    <label><input type="radio" name="challenges" value="2"> Somewhat confident</label>
                    <label><input type="radio" name="challenges" value="3"> Neutral</label>
                    <label><input type="radio" name="challenges" value="4"> Somewhat doubtful</label>
                    <label><input type="radio" name="challenges" value="5"> Very doubtful</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Self view</legend>
                <label>How do you typically view yourself?</label>
                <div class="options">
                    <label><input type="radio" name="view" value="1"> Very Positively</label>
                    <label><input type="radio" name="view" value="2"> Somewhat Positively</label>
                    <label><input type="radio" name="view" value="3"> Neutral</label>
                    <label><input type="radio" name="view" value="4"> Somewhat negatively</label>
                    <label><input type="radio" name="view" value="5"> Very negatively</label>
                </div>
            </fieldset>

            <fieldset>
                <legend>Satisfaction Rate</legend>
                <label>What is your current level of life satisfaction?</label>
                <div class="options">
                    <label><input type="radio" name="satisfaction" value="1">Completely satisfied</label>
                    <label><input type="radio" name="satisfaction" value="2"> Mostly satisfied</label>
                    <label><input type="radio" name="satisfaction" value="3"> Neutral</label>
                    <label><input type="radio" name="satisfaction" value="4"> Somewhat dissatisfied</label>
                    <label><input type="radio" name="satisfaction" value="5"> Very dissatisfied</label>
                </div>
            </fieldset>
            
            

            <fieldset>
                <legend>Suicidal Thoughts</legend>
                <label>Have you ever experienced suicidal thoughts?</label>
                <div class="options">
                    <label><input type="radio" name="suicidal-thoughts" value="1"> Never</label>
                    <label><input type="radio" name="suicidal-thoughts" value="2"> Rarely</label>
                    <label><input type="radio" name="suicidal-thoughts" value="3"> Occasionally</label>
                    <label><input type="radio" name="suicidal-thoughts" value="4"> Often</label>
                    <label><input type="radio" name="suicidal-thoughts" value="5"> Very Frequently</label>
                </div>
            </fieldset>
            
            <button type="submit" class="submit-btn">Submit</button>
        </form>
    </div>


    <div class="form-section">
        <h1>Real-Time Emotion Detection</h1>
        <img src="{{ url_for('video_feed') }}" width="450" height="300">
    </div>


    <div class="container22">
        <h1>Welcome to Your Personalized Therapy Session</h1>
        <p class="intro-text">
            Hey there! üòä Let's take a moment to talk. Think of this as a friendly chat, 
            not a test. Just share how you're feeling in your own words. 
        </p>
        
        <label for="mental-health-input">How are you feeling today? What's on your mind? ü§î</label>
        <textarea id="mental-health-input" placeholder="Write your thoughts here..."></textarea>
        
        <p class="recording-instructions">
            Now, read out what you've written. Take a deep breath and speak naturally. üé§
        </p>

        <div class="button-group">
            <button id="start-recording">üéô Start Recording</button>
            <button id="stop-recording" disabled>‚èπ Stop Recording</button>
        </div>

        <audio id="audio-playback" controls style="display: none;"></audio>

        <button id="submit-btn">Submit</button>
    </div>

    <script>
        let mediaRecorder;
        let audioChunks = [];

        document.getElementById("start-recording").addEventListener("click", async function() {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            mediaRecorder = new MediaRecorder(stream);
            audioChunks = [];

            mediaRecorder.ondataavailable = event => {
                audioChunks.push(event.data);
            };

            mediaRecorder.onstop = async () => {
                const audioBlob = new Blob(audioChunks, { type: "audio/wav" });
                const formData = new FormData();
                formData.append("audio", audioBlob, "recorded_audio.wav");

                const response = await fetch("/process_voice", { method: "POST", body: formData });
                const data = await response.json();

                localStorage.setItem("emotion", data.emotion);
            };

            mediaRecorder.start();
            document.getElementById("start-recording").disabled = true;
            document.getElementById("stop-recording").disabled = false;
        });

        document.getElementById("stop-recording").addEventListener("click", function() {
            mediaRecorder.stop();
            document.getElementById("start-recording").disabled = false;
            document.getElementById("stop-recording").disabled = true;
        });

        document.getElementById("submit-btn").addEventListener("click", async function() {
            const userText = document.getElementById("mental-health-input").value;

            await fetch("/submit_text", { 
                method: "POST", 
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ text: userText }) 
            });

            localStorage.setItem("userText", userText);
            window.location.href = "/report";
        });
    </script>

        
</body>
</html>
